<!DOCTYPE html>
<html>
<head lang="zh-CN">
    <meta charset="UTF-8">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache, must-revalidate">
    <meta http-equiv="expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="pragram" content="no-cache" />
    <script src="js/global.js" type="text/javascript"></script>
    <script src="js/zepto.min.js" type="text/javascript"></script>
    <title></title>
    <style>
        /* global */
        html,body,ul{margin: 0;padding: 0; position: relative}
        ul,ol{list-style: none;}
        html,body{width: 100%;height: 100%;overflow: hidden;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none}
        body{background: #f5f5f5;font:12px/21px ; color: #33234f;}
        a{color: #33234f;text-decoration: none;}
        a,button{-webkit-appearance:none;-moz-appearance:none;}
        a:hover,button:hover,span:hover,div:hover{-webkit-tap-highlight-color:transparent;}
        a{ text-decoration:none; color:#157efb; }
        a::-webkit-focus-inner,button::-webkit-focus-inner,span::-webkit-focus-inner,div::-webkit-focus-inner{ 
            background-color:rgba(0,0,0,0); -webkit-tap-highlight-color:rgba(0,0,0,0); }

        #music_btn{position: absolute; top:3%; right:7%;z-index: 1;display: block;}

 

        /* layout */
        body{display:-webkit-box;display: box;-webkit-box-orient: vertical;box-orient: vertical;}
        .content{display:-webkit-box;display: box;-webkit-box-orient: vertical;box-orient: vertical;-webkit-box-flex:1;box-flex:1;}
        .tabs{-webkit-box-flex:1;box-flex:1;width: 100%;}
        .tips{
            position: absolute;
            background: url("images/up.png") no-repeat;
            background-size: 70% 70%;
            top: 90%;
            height: 24px;
            width: 35px;
            left: 50%;
            text-align: center;
            opacity: 0;
            margin-left: -14px;
            -webkit-animation:Topto 1.6s ease-out infinite;
            -moz-animation:Topto 1.6s ease-out infinite;
            -o-animation:Topto 1.6s ease-out infinite;
        }

        /*设置音乐*/
        .icon_audio{background: url("images/on_off.png") no-repeat; background-size: 100% 100%; width:24px; height:24px; position:absolute; z-index: 999; top:8%; right:6%; }

        .border_anim .icon_audio_anim{
            display:block;
            width:8px; height:8px;
            position:absolute;
            background:url("images/icon_audio_sign.png") no-repeat;
            background-size: 100% 100%;
            -webkit-animation:audio_anim 2s ease-out infinite;
            -moz-animation:audio_anim 2s ease-out infinite;
            -o-animation:audio_anim 2s ease-out infinite;
            opacity:0;
        }
         /* tab */
        .tabs{position: relative;overflow: hidden;}
        .tabs ul{position: absolute;width: 100%;height: 100%;}
        .tabs li{ width: 100%; height:100%;position: relative; }
        .tabs .sprite{position: absolute;top: 0;left: 0%;-webkit-backface-visibility:hidden;}
        
        .tabs .tab0
        {
            background-color:Red;
         }
       
      
        .tabs .tab1 .bg{width: 100% ;height: 100% ; background:url("../img/2.png") no-repeat;  }
        .tabs .tab1 .sprite1 
        {
            background-image:url('../img/1.png');
            width:50px;
            height:33px;
            position:relative;
          
        }
         .tabs .tab1  .sprite1.show
         {  -webkit-animation:sprite1Topto 10s ease-out 1 forwards;
            -moz-animation:sprite1Topto 10s ease-out 1 forwards;
            -o-animation:sprite1Topto 10s ease-out 1 forwards;
             
             }
       @-webkit-keyframes sprite1Topto
        {   0%   {left: 20px;top:20px;       }
            20%  {left: 50%;top:80px; -webkit-transform: rotate(45deg);}
            40%  {left: 70%;top:100px; -webkit-transform: rotate(50deg);}
            60%  {left:80%;top:200px; -webkit-transform: rotate(65deg);}
            80%  {left: 75%;top:300px;    }
            100% {left: 60%;top:400px;  }
       }
       @-webkit-keyframes sprite1show
       { 0%   {opacity: 0; }
        100%   { opacity: 1;  } 
       }
       .tabs .tab1 p{opacity: 0; }
       .tabs .tab1 .p1.show
       {  -webkit-animation:sprite1show 2s ease-out 1;
            -moz-animation:sprite1show 2s ease-out 1;
            -o-animation:sprite1show 2s ease-out 1;
       }
       .tabs .tab1 .p2.show
       {  
           -webkit-animation:sprite1show 2s 2s ease-out 1;
            -moz-animation:sprite1show 2s 2s ease-out 1;
            -o-animation:sprite1show 2s 2s ease-out 1;
           }
      .tabs .tab1 .p3.show
       {  -webkit-animation:sprite1show  2s 4s ease-out 1;
            -moz-animation:sprite1show  2s 4s ease-out 1;
            -o-animation:sprite1show  2s 4s ease-out 1;
           }
      .tabs .tab1 .p4.show
       {  -webkit-animation:sprite1show  2s 6s ease-out 1;
            -moz-animation:sprite1show  2s 6s ease-out 1;
            -o-animation:sprite1show  2s 6s ease-out 1;
           }
      .tabs .tab1 .p5.show
       {  -webkit-animation:sprite1show  2s  8s ease-out 1;
            -moz-animation:sprite1show  2s 8s ease-out 1;
            -o-animation:sprite1show  2s 8s ease-out 1;
      }.tabs .tab2{background: #ffffff;}
      .tabs .tab2 .sprite1
      {
           background-image:url('../img/3.png');
            width:130px;
            height:150px;
            top:50%;
            left:50%;
            margin-left:-75px;
            margin-top:-75px;
            position:relative;
      }  
      .tabs .tab2 .sprite1.show
         {  
            -webkit-animation:sprite2Topto 10s ease-out 1 forwards;
            -moz-animation:sprite2Topto 10s ease-out 1 forwards;
            -o-animation:sprite2Topto 10s ease-out 1 forwards;
             
        }
       @-webkit-keyframes sprite2Topto
        {   0%   {-webkit-transform: rotate(45deg);}
            30%  {-webkit-transform: rotate(90deg);}
            50%  {-webkit-transform: rotate(160deg);}
            70%  {-webkit-transform: rotate(240deg);}
            100% {-webkit-transform: rotate(270deg);}
       }
      .tabs .tab2 .p{opacity: 0; }
       @-webkit-keyframes sprite2show
       { 0%   {opacity: 0; }
        100%   { opacity: 1;  } 
       }
       .tabs .tab2 .p1 
       {
            background-image: url('../img/4.png'); 
            background-repeat: no-repeat; 
            position: relative; 
            top: 46px;
            left: 41px;
            width:150px;
            height:150px;
       }
       .tabs .tab2 .p2 
       {
            background-image: url('../img/5.png'); 
            background-repeat: no-repeat; 
            position: relative; 
            top: -100px;
            left:193px;
            width:150px;
            height:150px;
       }
       .tabs .tab2 .p3 
       {
            background-image: url('../img/6.png'); 
            background-repeat: no-repeat;
             position: relative; 
            width:150px;
            height:150px;
            top: -56px;
            left: 278px;
       }
       .tabs .tab2 .p4 
       {
            background-image: url('../img/7.png'); 
            background-repeat: no-repeat;
             position: relative; 
          width:150px;
            height:150px; 
              top: -95px;
            left: 169px;
       }
        .tabs .tab2 .p5 
       {
            background-image: url('../img/8.png'); 
            background-repeat: no-repeat; 
            position: relative; 
            top: -244px;
            left: 24px;width:150px;
            height:150px;
       }
      .tabs .tab2 .p1.show
       {    -webkit-animation:sprite2show 2s ease-out 1 forwards;
            -moz-animation:sprite2show 2s ease-out 1 forwards;
            -o-animation:sprite2show 2s ease-out 1 forwards;
       }
       .tabs .tab2 .p2.show
       {  
           -webkit-animation:sprite2show 2s 2s ease-out 1 forwards ;
            -moz-animation:sprite2show 2s 2s ease-out 1 forwards;
            -o-animation:sprite2show 2s 2s ease-out 1 forwards;
           }
      .tabs .tab2 .p3.show
       {  -webkit-animation:sprite2show  2s 4s ease-out 1 forwards;
            -moz-animation:sprite2show  2s 4s ease-out 1 forwards;
            -o-animation:sprite2show  2s 4s ease-out 1 forwards;
           }
      .tabs .tab2 .p4.show
       {  -webkit-animation:sprite2show  2s 6s ease-out 1 forwards;
            -moz-animation:sprite2show  2s 6s ease-out 1 forwards;
            -o-animation:sprite2show  2s 6s ease-out 1 forwards;
           }
      .tabs .tab2 .p5.show
       {  -webkit-animation:sprite2show  2s  8s ease-out 1 forwards;
            -moz-animation:sprite2show  2s 8s ease-out 1 forwards;
            -o-animation:sprite2show  2s 8s ease-out 1 forwards;
      }
    </style>
</head>
<body>
    <div id="bg">
        <div id="loading">
        </div>
        <span style=""></span>
    </div>
    <div class="uparrw" id="uparrw" style="display: none;">
        <div class="icon_uparrw" id="icon_uparrw">
        </div>
        <div class="cur">
        </div>
    </div>
    <div style="height: 0px; overflow: hidden;">
        <audio src="48.mp3" loop="loop" autoplay></audio>
    </div>
    <a href="javascript:playPause();">
        <div class="icon_audio border_anim">
            <span class="iconaudio1"><s class="icon_audio_anim"></s></span><span class="iconaudio2">
                <s class="icon_audio_anim"></s></span><span class="iconaudio3"><s class="icon_audio_anim">
                </s></span>
        </div>
    </a>
    <div class="content">
        <div class="tabs" id="scene" style="display: none;">
            <ul>
                <li class="tab0"></li>
                <li class="tab1">
                    <div class="bg sprite">
                    </div>
                    <div class="sprite1 sprite">
                    </div>
                    <p class="p1 sprite">
                        1111111111111111</p>
                    <p class="p2 sprite">
                        22222222222222</p>
                    <p class="p3 sprite">
                        33333333333333</p>
                    <p class="p4 sprite">
                        444444444444444</p>
                    <p class="p5 sprite">
                        555555555555555</p>
                </li>
                <li class="tab2">
                    <div class="bg sprite">
                    </div>
                    <div class="sprite1 sprite">
                    </div>
                    <div class="p p1 sprite">
                    </div>
                    <div class="p p2 sprite">
                    </div>
                    <div class="p p3 sprite">
                    </div>
                    <div class="p p4 sprite">
                    </div>
                    <div class="p p5 sprite">
                    </div>
                </li>
                <li class="tab3"></li>
                <li class="tab4"></li>
                <li class="tab5"></li>
            </ul>
        </div>
    </div>
    <script type="text/javascript">

        function isWeixin() {
            var UA = navigator.userAgent;
            // alert(UA)
            if (/MicroMessenger/.test(UA)) {
                return true
            } else {
                return false
            }
        }
        function getOSVS() {
            var UA = navigator.userAgent;
            var s = UA.indexOf("OS ");
            if (s == -1) { return false }
            var vs = UA.substr(s + 3, 5);
            return vs
        }

        function playPause() {
            var myVideo = document.querySelectorAll('audio')[0];
            var music_btn = document.getElementById('music_btn');
            if (myVideo.paused) {
                myVideo.play()
                $('.icon_audio').addClass('border_anim')
            }
            else {
                myVideo.pause()
                $('.icon_audio').removeClass('border_anim')
            }
        }

        var debugcode = "error:";
        $(function () {
            var _bg = document.getElementById('bg'),
            _uparrw = document.getElementById('uparrw'),
            _icon_uparrw = document.getElementById('icon_uparrw');

            var isWEIXIN = isWeixin();
            var os_vs = getOSVS();
            var domeInitEnd = false;
            var myVideo = document.querySelector('audio');

            document.addEventListener('WeixinJSBridgeReady', function () {
                onBridgeReady()
                // _uparrw.querySelector(".cur").innerHTML = "滑动进入";
                if (os_vs >= "7_1_1") {
                    debugcode += "os_vs>=7_1_1,";
                    // _uparrw.style.display = 'block';
                    _uparrw.style.display = 'none';
                    _bg.style.display = 'none';
                    document.getElementById("scene").style.display = "block";
                    if (!domeInitEnd) {
                        initTabDomo()
                    }
                }
            })

            if (!isWEIXIN) {
                debugcode += "2,";
                // _bg.querySelector("span").innerHTML = "滑动进入";
                _uparrw.querySelector(".cur").innerHTML = "滑动进入";
                _uparrw.style.display = 'block';
                document.getElementById("loading").style.display = "none";
            }

            myVideo.addEventListener('canplaythrough', function () {
                _uparrw.style.display = 'none';
                _bg.style.display = 'none';
                document.getElementById("scene").style.display = "block";
                debugcode += "3,";
                if (!domeInitEnd) {
                    initTabDomo()
                }
                myVideo.play()
            }, false)

            $(document).one("touchstart", function (e) {
                if (!domeInitEnd) {
                    _uparrw.style.display = 'none';
                    _bg.style.display = 'none';
                    document.getElementById("scene").style.display = "block";
                    // alert(typeof myVideo.play)
                    initTabDomo()
                    debugcode += "4,";
                }
                myVideo.play()
            }, false)

            // alert("load ok")
            function initTabDomo() {
                domeInitEnd = true;
                debugcode += "5,";
                gameTab = new m.Tab({
                    target: document.querySelectorAll('.tabs li'),
                    trigger: document.querySelectorAll('.triggers li'),
                    onchange: function (n) {
                        debugcode += "7,";
                        var sprites = this.target[n].querySelectorAll('.sprite');
                        var peo = this.target[n].querySelectorAll('.peo');
                        for (var i = 0; i < sprites.length; i++) {
                            sprites[i].classList.add('show')
                        }
                        for (var j = 0; j < peo.length; j++) {
                            peo[j].classList.add('show')
                        }

                        if (this.prevPage !== window.undefined) {
                            var sprites = this.target[this.prevPage].querySelectorAll('.sprite');
                            for (var i = 0; i < sprites.length; i++) {
                                sprites[i].classList.remove('show')
                            }
                        }
                    },
                    touchMove: true
                });
                debugcode += "6,";
            }
        })
        // onload function end



        $(function () {
            $('#img_b .peo').click(function () {
                var index = $(this).index();
                // $(this).addClass('bg_big').siblings('.peo').removeClass('bg_big');
                $('#title .title').hide().removeClass('titlemove')
                $('#title .title').eq(index).show().addClass('titlemove')
            })
        })



       

    </script>
</body>
</html>
